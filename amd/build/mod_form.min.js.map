{"version":3,"sources":["../src/mod_form.js"],"names":["define","addServerButton","document","getElementById","missingConfig","getElementsByName","serverController","serverStructure","serverDropDown","init","structure","onchange","courseController","updateOptions","langController","filterController","taskController","getSelectedServer","selectedServerName","options","selectedIndex","text","i","server","name","disable","disabled","removeChildElems","getAllServers","courseDropDown","coursefileElem","addOptionForCourse","course","optionCourse","createElement","selectedLanguage","getSelectedLanguage","languages","includes","language","setAttribute","value","append","updateCoursefilePath","getSelectedCourse","coursefile","isEdit","selectedCourseName","courses","j","selectedCourseFile","childElementCount","languageDropDown","addLanguageOption","lang","optionLang","currentLang","taskDropDown","nameElem","useCompleteCourseElem","updateName","isCustomName","getHeadline","getSelectedTask","length","getAllHeadlines","task","headline","localHeadline","getAllTasks","tasks","m","push","headlines","getPseudoTaskFromCourse","n","getLocalizedLink","link","addTaskOption","optionTask","addPseudoTaskOption","useCompleteCourse","checked","getAttribute","selectedLink","slice","selectTaskByLink","filterTasks","filterSection","filterWrapper","filterSectionHeader","selectedTags","addFilter","tag","filter","classList","add","selectionBox","createSelectionBox","label","innerHTML","onclick","toggleVisibility","appendChild","values","inputWrapper","checkbox","type","setCheckboxListener","innerText","style","insertBefore","firstChild","update","elem","toggleAttribute","filterSelection","filteredTasks","filterTask","obj","tags","Object","keys","tagName","haveCommonEntry","array1","array2","Array","isArray","hidden","disableDropDownMenus","errorKey","require","str","notification","get_strings","component","done","s","addNotification","message","fail","exception","contextid","JSON","parse","serverConfigExists","MumieServer","removeChild"],"mappings":"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","sourcesContent":["define(['jquery', 'core/templates', 'core/modal_factory', 'auth_mumie/mumie_server_config', 'core/ajax'],\n    function() {\n        var addServerButton = document.getElementById(\"id_add_server_button\");\n        var missingConfig = document.getElementsByName(\"mumie_missing_config\")[0];\n        var serverController = (function() {\n            var serverStructure;\n            var serverDropDown = document.getElementById(\"id_server\");\n\n            return {\n                init: function(structure) {\n                    serverStructure = structure;\n                    serverDropDown.onchange = function() {\n                        courseController.updateOptions();\n                        langController.updateOptions();\n                        filterController.updateOptions();\n                        taskController.updateOptions();\n                    };\n                },\n                getSelectedServer: function() {\n                    var selectedServerName = serverDropDown.options[serverDropDown.selectedIndex].text;\n\n                    for (var i in serverStructure) {\n                        var server = serverStructure[i];\n                        if (server.name == selectedServerName) {\n                            return server;\n                        }\n                    }\n                    return null;\n                },\n                disable: function() {\n                    serverDropDown.disabled = true;\n                    removeChildElems(serverDropDown);\n                },\n                getAllServers: function() {\n                    return serverStructure;\n                }\n            };\n        })();\n\n        var courseController = (function() {\n            var courseDropDown = document.getElementById(\"id_mumie_course\");\n            var coursefileElem = document.getElementsByName(\"mumie_coursefile\")[0];\n\n            /**\n             * Add a new option the the 'MUMIE Course' drop down menu\n             * @param {Object} course\n             */\n            function addOptionForCourse(course) {\n                var optionCourse = document.createElement(\"option\");\n                var selectedLanguage = langController.getSelectedLanguage();\n                var name;\n                // If the currently selected server is not available on the server, we need to select another one.\n                if (!course.languages.includes(selectedLanguage)) {\n                    name = course.name[0];\n                } else {\n                    for (var i in course.name) {\n                        if (course.name[i].language == selectedLanguage) {\n                            name = course.name[i];\n                        }\n                    }\n                }\n                optionCourse.setAttribute(\"value\", name.value);\n                optionCourse.text = name.value;\n                courseDropDown.append(optionCourse);\n            }\n\n            /**\n             * Update the hidden input field with the selected course's course file path\n             */\n            function updateCoursefilePath() {\n                coursefileElem.value = courseController.getSelectedCourse().coursefile;\n            }\n\n            return {\n                init: function(isEdit) {\n                    courseDropDown.onchange = function() {\n                        updateCoursefilePath();\n                        langController.updateOptions();\n                        filterController.updateOptions();\n                        taskController.updateOptions();\n                    };\n                    courseController.updateOptions(isEdit ? coursefileElem.value : false);\n                },\n                getSelectedCourse: function() {\n                    var selectedCourseName = courseDropDown.options[courseDropDown.selectedIndex].text;\n                    var courses = serverController.getSelectedServer().courses;\n                    for (var i in courses) {\n                        var course = courses[i];\n                        for (var j in course.name) {\n                            if (course.name[j].value == selectedCourseName) {\n                                return course;\n                            }\n                        }\n                    }\n                    return null;\n                },\n                disable: function() {\n                    courseDropDown.disabled = true;\n                    removeChildElems(courseDropDown);\n                },\n                updateOptions: function() {\n                    var selectedCourseFile = coursefileElem.value;\n                    removeChildElems(courseDropDown);\n                    courseDropDown.selectedIndex = 0;\n                    var courses = serverController.getSelectedServer().courses;\n                    for (var i in courses) {\n                        var course = courses[i];\n                        addOptionForCourse(course);\n                        if (course.coursefile == selectedCourseFile) {\n                            courseDropDown.selectedIndex = courseDropDown.childElementCount - 1;\n                        }\n                    }\n                    updateCoursefilePath();\n                }\n            };\n        })();\n\n        var langController = (function() {\n            var languageDropDown = document.getElementById(\"id_language\");\n\n            /**\n             * Add a new option to the language drop down menu\n             * @param {string} lang the language to add\n             */\n            function addLanguageOption(lang) {\n                var optionLang = document.createElement(\"option\");\n                optionLang.setAttribute(\"value\", lang);\n                optionLang.text = lang;\n                languageDropDown.append(optionLang);\n            }\n            return {\n                init: function() {\n\n                    languageDropDown.onchange = function() {\n                        taskController.updateOptions();\n                        courseController.updateOptions();\n                    };\n                    langController.updateOptions();\n                },\n                getSelectedLanguage: function() {\n                    return languageDropDown.options[languageDropDown.selectedIndex].text;\n                },\n                disable: function() {\n                    languageDropDown.disabled = true;\n                    removeChildElems(languageDropDown);\n                },\n                updateOptions: function() {\n                    var currentLang = langController.getSelectedLanguage();\n                    removeChildElems(languageDropDown);\n                    languageDropDown.selectedIndex = 0;\n                    var languages = courseController.getSelectedCourse().languages;\n                    for (var i in languages) {\n                        var lang = languages[i];\n                        addLanguageOption(lang);\n                        if (lang == currentLang) {\n                            languageDropDown.selectedIndex = languageDropDown.childElementCount - 1;\n                        }\n                    }\n                }\n            };\n        })();\n\n        var taskController = (function() {\n            var taskDropDown = document.getElementById(\"id_taskurl\");\n            var nameElem = document.getElementById(\"id_name\");\n            var useCompleteCourseElem = document.getElementById(\"id_mumie_complete_course\");\n\n            /**\n             * Update the activity's name in the input field\n             */\n            function updateName() {\n                if (!isCustomName()) {\n                    nameElem.value = getHeadline(taskController.getSelectedTask());\n                }\n            }\n\n            /**\n             * Check whether the activity has a custom name\n             *\n             * @return {boolean} True, if there is no headline with that name in all tasks\n             */\n            function isCustomName() {\n                if (nameElem.value.length == 0) {\n                    return false;\n                }\n                return !getAllHeadlines().includes(nameElem.value);\n            }\n\n            /**\n             * Get the task's headline for the currently selected language\n             * @param {Object} task\n             * @returns  {string} the headline\n             */\n            function getHeadline(task) {\n                if (!task) {\n                    return null;\n                }\n                for (var i in task.headline) {\n                    var localHeadline = task.headline[i];\n                    if (localHeadline.language == langController.getSelectedLanguage()) {\n                        return localHeadline.name;\n                    }\n                }\n                return null;\n            }\n\n            /**\n             * Get all tasks that are available on all servers\n             *\n             * @return {Object} Array containing all available tasks\n             */\n            function getAllTasks() {\n                var tasks = [];\n                for (var i in serverController.getAllServers()) {\n                    var server = serverController.getAllServers()[i];\n                    for (var j in server.courses) {\n                        var course = server.courses[j];\n                        for (var m in course.tasks) {\n                            var task = course.tasks[m];\n                            tasks.push(task);\n                        }\n                    }\n                }\n                return tasks;\n            }\n\n            /**\n             * Get all possible headlines in all languages\n             * @returns {Object} Array containing all headlines\n             */\n            function getAllHeadlines() {\n                var headlines = [];\n                var tasks = getAllTasks();\n                tasks.push(getPseudoTaskFromCourse(courseController.getSelectedCourse()));\n                for (var i in tasks) {\n                    var task = tasks[i];\n                    for (var n in task.headline) {\n                        headlines.push(task.headline[n].name);\n                    }\n                }\n                var course = courseController.getSelectedCourse();\n                for (var j in course.name) {\n                    var name = course.name[j];\n                    headlines.push(name.value);\n                }\n                return headlines;\n            }\n\n            /**\n             * Add lanugage parameter to the task's link to display content in the selected language\n             * @param {Object} task\n             * @returns {string}\n             */\n            function getLocalizedLink(task) {\n                return task.link + \"?lang=\" + langController.getSelectedLanguage();\n            }\n\n            /**\n             * Add a new option to the 'Problem' drop down menu\n             * @param {Object} task\n             */\n            function addTaskOption(task) {\n                if (getHeadline(task) !== null) {\n                    var optionTask = document.createElement(\"option\");\n                    optionTask.setAttribute(\"value\", getLocalizedLink(task));\n                    optionTask.text = getHeadline(task);\n                    taskDropDown.append(optionTask);\n                }\n            }\n\n            /**\n             * User can chose to select an entire course instead of a single problem.\n             * If they do so, we simply add a pseudo problem linking to the courses overview page\n             * @param {Object} course\n             */\n            function addPseudoTaskOption(course) {\n                var task = getPseudoTaskFromCourse(course);\n                var optionTask = document.createElement(\"option\");\n                optionTask.setAttribute(\"value\", getLocalizedLink(task));\n                optionTask.text = getHeadline(task);\n                taskDropDown.append(optionTask);\n            }\n\n            /**\n             * Get a task that links to a course's overview page\n             * @param {Object} course\n             * @returns {Object} task\n             */\n            function getPseudoTaskFromCourse(course) {\n                var headline = [];\n                for (var i in course.name) {\n                    var name = course.name[i];\n                    headline.push({\n                        \"name\": name.value,\n                        \"language\": name.language\n                    });\n                }\n                return {\n                    \"link\": course.link,\n                    \"headline\": headline\n                };\n            }\n\n            /**\n             * Returns true, if the user has chosen to select the entire course instead of a single problem\n             * @returns {boolean}\n             */\n            function useCompleteCourse() {\n                return useCompleteCourseElem.checked;\n            }\n\n            return {\n                init: function(isEdit) {\n                    updateName();\n                    taskDropDown.onchange = function() {\n                        updateName();\n                    };\n                    useCompleteCourseElem.onchange = function() {\n                        taskController.updateOptions();\n                        filterController.updateOptions();\n                    };\n                    taskController.updateOptions(isEdit ?\n                        taskDropDown.options[taskDropDown.selectedIndex].getAttribute('value') : undefined\n                    );\n                },\n                getSelectedTask: function() {\n                    var selectedLink = taskDropDown.options[taskDropDown.selectedIndex] ==\n                        undefined ? undefined : taskDropDown.options[taskDropDown.selectedIndex].getAttribute('value');\n                    var course = courseController.getSelectedCourse();\n                    var tasks = course.tasks.slice();\n                    tasks.push(getPseudoTaskFromCourse(course));\n                    for (var i in tasks) {\n                        var task = tasks[i];\n                        if (selectedLink == getLocalizedLink(task)) {\n                            return task;\n                        }\n                    }\n                    return null;\n                },\n                disable: function() {\n                    taskDropDown.disabled = true;\n                    removeChildElems(taskDropDown);\n                },\n                updateOptions: function(selectTaskByLink) {\n                    removeChildElems(taskDropDown);\n                    taskDropDown.selectedIndex = 0;\n                    if (useCompleteCourse()) {\n                        addPseudoTaskOption(courseController.getSelectedCourse());\n                    } else {\n                        var tasks = filterController.filterTasks(courseController.getSelectedCourse().tasks);\n                        for (var i in tasks) {\n                            var task = tasks[i];\n                            addTaskOption(task);\n                            if (selectTaskByLink === getLocalizedLink(task)) {\n                                taskDropDown.selectedIndex = taskDropDown.childElementCount - 1;\n                            }\n                        }\n                    }\n                    updateName();\n                },\n                useCompleteCourse: function() {\n                    return useCompleteCourse();\n                }\n            };\n        })();\n\n        var filterController = (function() {\n            var filterSection = document.getElementById('mumie_filter_section');\n            var filterWrapper = document.getElementById(\"mumie_filter_wrapper\");\n            var filterSectionHeader = document.getElementById('mumie_filter_header');\n\n            var selectedTags = [];\n\n            /**\n             * Add a new filter category to the form for a given tag\n             * @param {Object} tag\n             */\n            function addFilter(tag) {\n                var filter = document.createElement('div');\n                filter.classList.add('row', 'fitem', 'form-group', 'mumie-filter');\n\n                var selectionBox = createSelectionBox(tag);\n\n                var label = document.createElement('label');\n                label.innerHTML = '<i class=\"fa fa-caret-down mumie-icon\"></i>' + tag.name;\n                label.classList.add('col-md-3', 'mumie-collapsable');\n                label.onclick = function() {\n                    toggleVisibility(selectionBox);\n                };\n                filter.appendChild(label);\n                filter.appendChild(selectionBox);\n                filterWrapper.appendChild(filter);\n            }\n\n            /**\n             * Create an element that contains checkboxes for all tag values\n             * @param {Object} tag\n             * @returns {Object} A div containing mulitple checkboxes\n             */\n            function createSelectionBox(tag) {\n                var selectionBox = document.createElement('div');\n                selectionBox.classList.add('col-md-9', 'felement', 'mumie_selection_box');\n                for (var i in tag.values) {\n                    selectedTags[tag.name] = [];\n                    var inputWrapper = document.createElement('div');\n                    inputWrapper.classList.add('mumie_input_wrapper');\n\n                    var value = tag.values[i];\n                    var checkbox = document.createElement('input');\n                    checkbox.type = 'checkbox';\n                    checkbox.value = value;\n                    setCheckboxListener(tag, checkbox);\n\n                    var label = document.createElement('label');\n                    label.innerText = value;\n                    label.style = \"padding-left: 5px\";\n                    inputWrapper.appendChild(checkbox);\n                    inputWrapper.appendChild(label);\n                    selectionBox.insertBefore(inputWrapper, selectionBox.firstChild);\n                }\n                return selectionBox;\n            }\n\n            /**\n             * Selecting a tag value should filter the drop down menu for MUMIE problems for the chosen values\n             * @param {*} tag The tag we created the checkbox for\n             * @param {*} checkbox The checkbox containing the filter input checkboxes\n             */\n            function setCheckboxListener(tag, checkbox) {\n                checkbox.onclick = function() {\n                    if (!checkbox.checked) {\n                        var update = [];\n                        for (var i in selectedTags[tag.name]) {\n                            var value = selectedTags[tag.name][i];\n                            if (value != checkbox.value) {\n                                update.push(value);\n                            }\n                        }\n                        selectedTags[tag.name] = update;\n                    } else {\n                        selectedTags[tag.name].push(checkbox.value);\n                    }\n                    taskController.updateOptions();\n                };\n            }\n\n            /**\n             * Toggle visibility of the given object\n             * @param {Object} elem\n             */\n            function toggleVisibility(elem) {\n                elem.toggleAttribute('hidden');\n            }\n\n            /**\n             * Filter a list of tasks\n             * @param {Array} tasks the tasks to filter\n             * @param {Array} filterSelection the selection to filter with\n             * @returns {Array} the filtered tasks\n             */\n            function filterTasks(tasks, filterSelection) {\n                var filteredTasks = [];\n                for (var i in tasks) {\n                    var task = tasks[i];\n                    if (filterTask(task, filterSelection)) {\n                        filteredTasks.push(task);\n                    }\n                }\n                return filteredTasks;\n            }\n\n            /**\n             * Check if the task fullfills the requirements set by the filter selection\n             * @param {Object} task\n             * @param {Array} filterSelection\n             * @returns {boolean}\n             */\n            function filterTask(task, filterSelection) {\n                var obj = [];\n                for (var i in task.tags) {\n                    var tag = task.tags[i];\n                    obj[tag.name] = tag.values;\n                }\n\n                for (var j in Object.keys(filterSelection)) {\n                    var tagName = Object.keys(filterSelection)[j];\n                    if (filterSelection[tagName].length == 0) {\n                        continue;\n                    }\n                    if (!obj[tagName]) {\n                        return false;\n                    }\n                    if (!haveCommonEntry(filterSelection[tagName], obj[tagName])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n\n            /**\n             * Return true, of the two arrays have at least one entry in common\n             * @param {Array} array1\n             * @param {Array} array2\n             * @returns {boolean}\n             */\n            function haveCommonEntry(array1, array2) {\n                if (!Array.isArray(array1) || !Array.isArray(array2)) {\n                    return false;\n                }\n                for (var i = 0; i < array1.length; i++) {\n                    if (array2.includes(array1[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n\n            return {\n                init: function() {\n                    this.updateOptions();\n                    filterSectionHeader.onclick = function() {\n                        toggleVisibility(filterWrapper);\n                    };\n                },\n                updateOptions: function() {\n                    if (taskController.useCompleteCourse()) {\n                        filterSection.style = \"display: none\";\n                    } else {\n                        filterSection.style = \"display: flex\";\n                    }\n                    var tags = courseController.getSelectedCourse().tags;\n                    selectedTags = [];\n                    if (tags.length > 0) {\n                        filterSection.hidden = false;\n                    } else {\n                        filterSection.hidden = true;\n                    }\n                    removeChildElems(filterWrapper);\n                    for (var i in tags) {\n                        var tag = tags[i];\n                        addFilter(tag);\n                    }\n                },\n                filterTasks: function(tasks) {\n                    return filterTasks(tasks, selectedTags);\n                }\n            };\n        })();\n\n        /**\n         *  Disable all dropdown menus and show notification\n         * @param {string} errorKey\n         */\n        function disableDropDownMenus(errorKey) {\n            require(['core/str', \"core/notification\"], function(str, notification) {\n                str.get_strings([{\n                    'key':  errorKey,\n                    component: 'mod_mumie'\n                }]).done(function(s) {\n                    notification.addNotification({\n                        message: s[0] + \"<b>\" + missingConfig.getAttribute(\"value\") + \"</b>\",\n                        type: \"problem\"\n                    });\n                }).fail(notification.exception);\n            });\n            serverController.disable();\n            courseController.disable();\n            langController.disable();\n            taskController.disable();\n        }\n\n        return {\n            init: function(contextid) {\n                var isEdit = document.getElementById(\"id_name\").getAttribute('value');\n                var serverStructure = JSON.parse(document.getElementsByName('mumie_server_structure')[0].value);\n\n                if (isEdit && !serverConfigExists()) {\n                    disableDropDownMenus('mumie_form_missing_server');\n                } else if (!serverStructure.length) {\n                    disableDropDownMenus('mumie_form_no_server_conf');\n                } else {\n                    serverController.init(serverStructure);\n                    courseController.init(isEdit);\n                    taskController.init(isEdit);\n                    langController.init();\n                    filterController.init();\n                }\n                if (addServerButton) {\n                    require(['auth_mumie/mumie_server_config'], function(MumieServer) {\n                        MumieServer.init(addServerButton, contextid);\n                    });\n                }\n            }\n        };\n\n        /**\n         * Remove all child elements of a given html element\n         * @param {Object} elem\n         */\n        function removeChildElems(elem) {\n            while (elem.firstChild) {\n                elem.removeChild(elem.firstChild);\n            }\n        }\n\n        /**\n         * Check, if the flag for an existing config is set\n         * @returns {boolean}\n         */\n        function serverConfigExists() {\n            return document.getElementsByName(\"mumie_missing_config\")[0].getAttribute(\"value\") === \"\";\n        }\n    });"],"file":"mod_form.min.js"}